# 批量文件重命名工具 - 我很会养猪丶开发版

一个功能强大、界面美观的批量文件重命名工具，支持多种重命名规则和主题切换。

## 📋 目录

- [功能特性](#功能特性)
- [系统要求](#系统要求)
- [安装说明](#安装说明)
- [使用指南](#使用指南)
- [重命名规则](#重命名规则)
- [界面主题](#界面主题)
- [项目结构](#项目结构)
- [开发说明](#开发说明)
- [许可证](#许可证)

## ✨ 功能特性

### 🔄 多种重命名规则
- **文本替换**：查找并替换文件名中的指定文本
- **添加文本**：在文件名前或后添加指定文本
- **添加序号**：为文件添加序号，支持自定义起始数字、步长和位数
- **删除字符**：删除文件名中指定位置的字符
- **大小写转换**：支持全大写、全小写、首字母大写、句首大写
- **正则表达式**：使用正则表达式进行复杂的文本处理
- **修改扩展名**：批量修改文件扩展名
- **添加日期时间**：根据文件创建或修改时间添加日期标记

### 🎨 现代化界面
- **多主题支持**：亮色主题、蓝色专业主题
- **响应式布局**：自适应窗口大小
- **实时预览**：重命名前可预览效果
- **拖拽支持**：支持拖拽文件夹到界面

### 🛡️ 安全特性
- **撤销功能**：支持撤销重命名操作
- **预览模式**：重命名前显示预览结果
- **错误处理**：完善的错误提示和处理机制

## 💻 系统要求

- **操作系统**：Windows 10/11, macOS 10.14+, Linux
- **Python版本**：Python 3.8+
- **内存**：至少 512MB RAM
- **存储空间**：至少 100MB 可用空间

## 🚀 安装说明

### 方法一：直接运行（推荐）

1. 下载项目文件
2. 安装依赖包：
   ```bash
   pip install -r requirements.txt
   ```
3. 运行程序：
   ```bash
   python main.py
   ```

### 方法二：使用可执行文件

1. 下载 `FileRenameToolPro.exe`
2. 双击运行即可

### 依赖包

```
PySide6>=6.6.0
Pillow>=10.0.0
regex>=2023.10.3
```

## 📖 使用指南

### 基本操作流程

1. **选择文件夹**
   - 点击"选择文件夹"按钮
   - 或直接拖拽文件夹到界面

2. **设置重命名规则**
   - 在右侧面板中选择需要的重命名规则
   - 配置规则参数
   - 可同时启用多个规则

3. **预览效果**
   - 点击"预览效果"按钮查看重命名结果
   - 确认无误后执行重命名

4. **执行重命名**
   - 点击"开始重命名"按钮
   - 等待操作完成

### 界面布局

```
┌─────────────────────────────────────────────────────────┐
│ 菜单栏：文件 | 编辑 | 工具 | 帮助                        │
├─────────────────────────────────────────────────────────┤
│ 工具栏：选择文件夹 | 预览 | 重命名 | 撤销 | 主题 | 设置   │
├─────────────────┬───────────────────────────────────────┤
│                 │ 重命名规则                             │
│   文件列表      │ ┌─────────────────────────────────────┐ │
│                 │ │ ☑ 文本替换                         │ │
│ 文件名 | 新名称 │ │ ☑ 添加文本                         │ │
│ file1  | new1   │ │ ☐ 添加序号                         │ │
│ file2  | new2   │ │ ☐ 删除字符                         │ │
│ ...    | ...    │ │ ☐ 大小写转换                       │ │
│                 │ │ ☐ 正则表达式                       │ │
│                 │ │ ☐ 修改扩展名                       │ │
│                 │ │ ☐ 添加日期时间                     │ │
│                 │ └─────────────────────────────────────┘ │
│                 │ 清空文件名                             │
└─────────────────┴───────────────────────────────────────┘
```

## 🔧 重命名规则详解

### 1. 文本替换
- **功能**：查找并替换文件名中的指定文本
- **参数**：
  - 查找文本：要替换的文本
  - 替换为：替换后的文本
  - 区分大小写：是否区分大小写

### 2. 添加文本
- **功能**：在文件名前或后添加指定文本
- **参数**：
  - 文本：要添加的文本
  - 位置：文件名前/文件名后

### 3. 添加序号
- **功能**：为文件添加序号
- **参数**：
  - 模板：序号模板（使用 {index} 作为占位符）
  - 起始数字：序号的起始值
  - 步长：序号递增的步长
  - 位数：序号的位数（自动补零）

**示例**：
- 模板：`photo_{index}.jpg`
- 起始：1，步长：1，位数：3
- 结果：`photo_001.jpg`, `photo_002.jpg`, `photo_003.jpg`

### 4. 删除字符
- **功能**：删除文件名中指定位置的字符
- **参数**：
  - 开始位置：删除的起始位置（从0开始）
  - 结束位置：删除的结束位置

### 5. 大小写转换
- **功能**：转换文件名的大小写
- **模式**：
  - 全部小写：`MyFile.txt` → `myfile.txt`
  - 全部大写：`MyFile.txt` → `MYFILE.TXT`
  - 首字母大写：`my file.txt` → `My File.txt`
  - 句首大写：`my file.txt` → `My file.txt`

### 6. 正则表达式
- **功能**：使用正则表达式进行复杂的文本处理
- **参数**：
  - 模式：正则表达式模式
  - 替换为：替换文本
  - 标志：忽略大小写、多行模式

**常用模式**：
- 删除数字：`\d+` → ``
- 删除括号内容：`\([^)]*\)` → ``
- 替换空格为下划线：`\s+` → `_`

### 7. 修改扩展名
- **功能**：批量修改文件扩展名
- **参数**：
  - 新扩展名：目标扩展名（如：.txt）

### 8. 添加日期时间
- **功能**：根据文件时间添加日期标记
- **参数**：
  - 日期来源：文件创建日期/文件修改日期
  - 格式：日期时间格式
  - 模板：日期模板（使用 {date} 作为占位符）

**格式示例**：
- `%Y%m%d` → `20240101`
- `%Y-%m-%d` → `2024-01-01`
- `%Y%m%d_%H%M%S` → `20240101_120000`

## 🎨 界面主题

### 亮色主题
- 清爽的白色背景
- 蓝色系按钮和控件
- 适合日间使用

### 蓝色专业主题
- 专业的蓝色配色方案
- 我很会养猪丶开发版特色主题
- 适合专业用户

### 主题切换
- 点击工具栏中的"主题"按钮
- 或使用菜单栏中的主题选项

## 📁 项目结构

```
FileRenameToolPro/
├── main.py                 # 主程序入口
├── requirements.txt        # 依赖包列表
├── LICENSE                 # 许可证文件
├── README.md              # 说明文档
├── build.py               # 构建脚本
├── FileRenameToolPro.spec # PyInstaller配置
├── core/                  # 核心功能模块
│   ├── __init__.py
│   └── rename_engine.py   # 重命名引擎
├── ui/                    # 用户界面模块
│   ├── __init__.py
│   ├── main_window.py     # 主窗口
│   ├── file_manager.py    # 文件管理器
│   ├── rule_panels.py     # 规则面板
│   ├── themes.py          # 主题管理
│   └── qt_adapter.py      # Qt适配器
├── static/                # 静态资源
│   └── 对勾1.png         # 图标资源
├── build/                 # 构建输出
└── dist/                  # 分发文件
    ├── FileRenameToolPro.exe
    └── 使用说明.txt
```

## 🛠️ 开发说明

### 技术栈
- **GUI框架**：PySide6 (Qt6)
- **编程语言**：Python 3.8+
- **构建工具**：PyInstaller
- **图像处理**：Pillow

### 核心模块

#### 重命名引擎 (`core/rename_engine.py`)
- 实现各种重命名规则
- 文件操作和错误处理
- 预览功能

#### 主窗口 (`ui/main_window.py`)
- 应用程序主界面
- 菜单栏和工具栏
- 布局管理

#### 规则面板 (`ui/rule_panels.py`)
- 各种重命名规则的设置界面
- 实时预览和验证
- 规则组合管理

#### 主题管理 (`ui/themes.py`)
- 多主题支持
- 样式表管理
- 主题切换功能

### 构建说明

使用 PyInstaller 构建可执行文件：

```bash
python build.py
```

或直接使用 PyInstaller：

```bash
pyinstaller FileRenameToolPro.spec
```

### 开发环境设置

1. 克隆项目
2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 运行开发版本：
   ```bash
   python main.py
   ```

## 📄 许可证

本项目采用 MIT 许可证。详情请参阅 [LICENSE](LICENSE) 文件。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。

## 📞 支持

如果您在使用过程中遇到问题，请：

1. 查看本文档的常见问题部分
2. 提交 Issue 描述问题
3. 联系开发团队

---

**批量文件重命名工具 - 我很会养猪丶开发版**  
让文件重命名变得简单高效！

